import tkinter as tk
from tkinter import *
from datetime import datetime, timedelta

#resin timer features
root = Tk()
root.geometry("600x400")
root.title("Resin Timer")

#resin left
def calculate_time():
    try:
        #get the number of current resin by the user
        resin_amount = int(resin_box.get())

        #input between 0-160
        if resin_amount <= 160:            
            time_per_resin = 8
            minutes_needed = (160-resin_amount) * time_per_resin

            duration = timedelta(minutes=minutes_needed)
            current_time = datetime.now()
            new_time = current_time + duration

            false_label.config(text="Full refill in: " + new_time.strftime("%d-%m-%Y %I:%M:%S %p"))   
        else:
            false_label.config(text="Number must be between 0 to 160")       
    except ValueError:
        false_label.config(text="Please fill in ONLY NUMBER!!!", foreground="red")

#features label
resin_label = Label(root, text="Enter current Resin:")
resin_label.pack(pady=15)

resin_box = Entry(root)
resin_box.pack(pady=10)

confirm_button = Button(root, text="Confirm", command=calculate_time)
confirm_button.pack(pady=5)

false_label = Label(root, text='')
false_label.pack(pady=20)

#correct result
#result = Label(root)

#clock
#update clock every second
def update_clock():
    current_time = datetime.now().strftime("%d-%m-%Y %I:%M:%S %p")
    clock_label.config(text="Current Time: " + current_time)
    root.after(1000, update_clock)

#clock label
clock_label = Label(root, text='')
clock_label.pack(side="bottom", anchor="w")

update_clock()
root.mainloop()